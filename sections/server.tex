\section{QuizFight server}

QuizFight relies on a Node.js server and a MongoDB database.
We choose these technologies consequently to the choice of the JSON format for
exchanging data.
In fact, since Node.js uses JavaScript as a language, it is well suited for
dealing with JSON messages.
The same motivation applies for MongoDB. It is a NoSQL database, where
documents can be thought as JSON files.
The flexibility of both communication and saving convinced us to use this
stack.
Furthermore there are no strong evidences, based on performance and overhead,
against the use of a Node.js server rather that a Java one. 

To interact with the database we use a well-known Node.js's package:
\texttt{mongoose.js}.
By following the Model-View-Controller design pattern we define both
models and controllers server side and let the clients provide the View-part.

For exposing our APIs, we use \texttt{Express.js}.
Each API is represented by a \texttt{Route} object.
No access is directly made from the routes to the model objects.
Instead, they use some methods provided by the controllers, exactly as stated
by the MVC pattern.

The server is a fundamental component in QuizFight. In fact, it is used to
store the data of the users and duels, and it also performs the binding
$<$player, opponent$>$ and keeps the actual questions.
Duels are thus generated server side and sent, on demand, to the clients,
round by round.

Users identification is based on their GGames usernames.
This provides an effective way to retrieve their information and to bind
them in duels.
We could have used MongoDB identifiers, instead we used usernames for their
simplicity.
In fact, using MongoDB's ids would have required too much effort.
Clients are unaware of how the server identifies users, so in this case the
best we could do client side is to send usernames.
Then, on the server, for each operation involving users we should have
retrieved user's information.
This pattern, although possible, rapidly deteriorates to a lot of unnecessary
requests.
We then prefer using usernames, which we know by Google's assurance to be
unique.
